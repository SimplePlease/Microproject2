# Microproject2
Микро проект №2 по предмету АВС.
Условие: Задача об обедающих философах. 
Пять философов сидят возле круглого стола. Они проводят жизнь, чередуя приемы пищи и размышления. В центре стола находится большое блюдо спагетти. Спагетти длинные и запутанные, философам тяжело управляться с ними, поэтому каждый из них, что бы съесть порцию, должен пользоваться двумя вилками. К несчастью, философам дали только пять вилок. Между каждой парой философов лежит одна вилка, поэтому эти высококультурные и предельно вежливые люди договорились, что каждый будет пользоваться только теми вилками, которые лежат рядом с ним (слева и справа). Написать многопоточную программу, моделирующую поведение философов с помощью семафоров.
  
 Примечание: Программа должна избегать фатальной ситуации, в которой все философы голодны, ни один из них не может взять обе вилки (например, каждый из философов держит по одной вилки и не хочет отдавать ее). Решение должно быть симметричным, то есть все потоки-философы должны выполнять один и тот же код. 

В программе использованы структуры из библиотеки POSIX thread, дополнительно из заголовка semaphore.h. (рис. 2)
Для симуляции жизни философа используются некоторые константы. 

Для того, чтобы время работы программы не было бесконечным, пользователю предлагается ввести через консоль, сколько раз он хочет, чтобы философы поели. При вводе есть небольшая защита от дурака, чтобы пользователь вводил только целые числа в разумных пределах. 

Основной метод работает по следующему принципу (рис. 5): философы-потоки размышляют 3 секунды. После они пытаются взять вилку слева от них. Если получилось, то пытаются взять вилку справа от них. Необходимость семафора в данной программе в том, что он заставляет поток ждать, когда вилка освободится, если она занята другим философом-потоком. То есть, когда философ берет семафор-вилку, он начинает ожидание, то есть блокирует вилку для остальных потоков до того момента, пока философ-поток не поест и не вернет вилку-семафор на стол. После философ есть в течение 2 секунд, кладет вилки и снова размышляет 3 секунды. 

В основной функции main создаются потоки-философы и инициализируется вектор вилок-семафоров. 
После, по классической схеме, запускается программа для 5 потоков-философов с последующим объединением потоков. (рис. 6)
